<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="somnus">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="somnus">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="somnus">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"Sidebar Position, available value":"left | right (only for Pisces | Gemini).","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>somnus</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  

  <div class="container  
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">somnus</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/04/tarjan缩点-对scc进行dfs来代替传递闭包/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/04/tarjan缩点-对scc进行dfs来代替传递闭包/" itemprop="url">tarjan缩点+对scc进行dfs来代替传递闭包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-04T21:20:18+08:00">
                2019-12-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Every cow’s dream is to become the most popular cow in the herd. In a herd of NN cows (labeled from 11 to NN), you are given MM ordered pairs of the form (A,B)(A,B) that tell you that cow AA thinks that cow BB is popular. Since popularity is transitive, if AA thinks BB is popular and BB thinks CC is popular, then AA will also think that CC is popular, even if this is not explicitly specified by an ordered pair in the input. Your task is to compute the cows that are considered popular by every other cow.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification"></a>Input Specification</h3><p>The first line of the input contains two space-separated integers NN and MM, denoting the total number of cows and the total number of ordered pairs. 1≤N≤10000,1≤M≤500001≤N≤10000,1≤M≤50000.</p>
<p>Then MM lines follow, each of which represents an ordered pair. Each such line contains two space-separated numbers AA and BB, meaning that AA thinks BB is popular.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification"></a>Output Specification</h3><p>The first line of the output contains a single integer kk that is the number of cows who are considered popular by every other cow.</p>
<p>The second line contains kk integer(s) in ascending order, which are the labels of those cows. Each number is followed by a space. If k=0k=0, just output an empty line.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><p>Copy</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 3</span><br><span class="line">1 2</span><br><span class="line">2 1</span><br><span class="line">2 3</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><p>Copy</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>可以使用Floyd算法得到传递闭包，再去寻找被所有顶点可达的顶点集合，但是数据要求10000，O(N^3)的Floyd算法会超时，使用强连通分支的思想来得解。</p>
<h2 id="可行性"><a href="#可行性" class="headerlink" title="可行性"></a>可行性</h2><p>性质：最终的答案肯定在某个scc中</p>
<p>证明：假设有两个scc a，b中都包含了部分答案，则对于a中的答案点顶p与b中的答案顶点q，因为所有顶点都可以到达p，q一定也可以到达p，同理p一定也可以到达q，这与p和q分别属于两个scc矛盾。所以最后的答案肯定在某个scc中。</p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>使用两次dfs来得到图的scc集合，（也可使用tarjan缩点）。将第一次dfs的顶点都压入栈中，再将图的所有边取反根据栈的顺序进行第二次dfs。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(Node *nodes[],vert* verts[],<span class="keyword">int</span> nodePos)</span></span>&#123;</span><br><span class="line">    vert *vert = verts[nodePos];</span><br><span class="line">    <span class="keyword">if</span>(vert-&gt;color != <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    vert-&gt;color = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(Node *n = nodes[nodePos];n != <span class="literal">nullptr</span>;n = n-&gt;next)&#123;</span><br><span class="line">        dfs(nodes,verts,n-&gt;val);</span><br><span class="line">    &#125;</span><br><span class="line">    nodeStack.push(nodePos);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfsT</span><span class="params">(Node *nodes[],vert* verts[],<span class="keyword">int</span> nodePos,<span class="keyword">int</span> leader,<span class="keyword">int</span> scc[])</span></span>&#123;</span><br><span class="line">    vert *vert = verts[nodePos];</span><br><span class="line">    <span class="keyword">if</span>(vert-&gt;color != <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    scc[nodePos] = leader;</span><br><span class="line">    vert-&gt;color = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(Node *n = nodes[nodePos];n != <span class="literal">nullptr</span>;n = n-&gt;next)&#123;</span><br><span class="line">        dfsT(nodes,verts,n-&gt;val,leader,scc);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第三次dfs，搭建scc之间的关系，如果某个scc被其他所有的scc访问到，说明这个scc中的顶点是可以被图中的所有顶点访问到的，（因为scc内部互通），再有前面证明的性质，只要得到了某个被所有scc访问到的scc，便可以得到答案。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfsFind</span><span class="params">(Node *nodes[],vert* verts[],<span class="keyword">int</span> nodePos,<span class="keyword">int</span> scc[],<span class="keyword">int</span> leader,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sccMatix[],<span class="keyword">int</span> leaderIndex[])</span></span>&#123;</span><br><span class="line">    vert *vert = verts[nodePos];</span><br><span class="line">    <span class="keyword">if</span>(vert-&gt;color != <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    vert-&gt;color = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(Node *n = nodes[nodePos];n != <span class="literal">nullptr</span>;n = n-&gt;next)&#123;</span><br><span class="line">        <span class="keyword">if</span>(scc[n-&gt;val] != leader)&#123;</span><br><span class="line">            sccMatix[leaderIndex[leader]][leaderIndex[scc[n-&gt;val]]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dfsFind(nodes,verts,n-&gt;val,scc,leader,sccMatix,leaderIndex);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h2><p>第一次与第二次dfs：使用邻接表，m条边n个顶点，O(m+n)</p>
<p>第三次dfs：因为对每个scc都要进行一次完整的dfs，要把之前的color清空，所以是O(sccNum*(m+n))的，scc的个数影响dfs的次数</p>
<p>根据scc直接的传递关系找到结果，O(sccNum^2)</p>
<p>结果排序：O（nlgn）</p>
<p>总体复杂度O(sccNum<em>(m+n) + sccNum^2),在sccNum=n时，是最坏情况，O（n </em>（m+n）），远小于Floyd算法（O（n^3））。。。</p>
<p>源码：<a href="https://paste.ubuntu.com/p/gHTFN2FXTH/" target="_blank" rel="noopener">https://paste.ubuntu.com/p/gHTFN2FXTH/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/16/srcPtr-java迁移过程/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/16/srcPtr-java迁移过程/" itemprop="url">srcPtr-java迁移过程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-16T15:22:01+08:00">
                2019-06-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/代码分析/" itemprop="url" rel="index">
                    <span itemprop="name">代码分析</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2019年6月16日</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Variable <span class="title">GetPreviousVarOccurence</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> name)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">auto</span> it = declared.begin(); it != declared.end(); ++it) &#123;</span><br><span class="line">      <span class="keyword">if</span> (it-&gt;ContainsVariableName(name))</span><br><span class="line">         <span class="keyword">return</span> it-&gt;GetVar(name);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   Variable var; </span><br><span class="line">   <span class="keyword">return</span> var;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从变量池中取值时，直接返回匹配name的变量，但是赋值过程中可能出现多个变量的值经过运算后赋值（还应该考虑一个函数的返回值进行赋值），比如int x = a + b，修改这里的实现。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Variable&gt; GetPreviousVarOccurences(<span class="built_in">std</span>::<span class="built_in">string</span> name)&#123;</span><br><span class="line">       <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Variable&gt; ret;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">auto</span> it = declared.begin(); it != declared.end(); ++it) &#123;</span><br><span class="line">           it-&gt;ContainsAndAddVariableName(name,&amp;ret);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> ret;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ContainsAndAddVariableName</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> name,<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Variable&gt; *ret)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> i = variables.begin(); i != variables.end(); ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">std</span>::<span class="built_in">strstr</span>(name.c_str(),i-&gt;second.nameofidentifier.c_str()))</span><br><span class="line">                ret-&gt;push_back(variables[i-&gt;second.nameofidentifier]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>抛弃andersen算法，定义了datadependency的数据结构，在第二次parse的时候，将srcPtrPolicy.declared中的所有数据保留，进行第三次parse。（这样在第三次parse的时候可以找到方法中声明的对象）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">dataDependency</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">std</span>::pair&lt;Class,Variable&gt; sender;</span><br><span class="line">    <span class="built_in">std</span>::pair&lt;Class,Variable&gt; accepter;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>第三次parse时，建立扫描到的声明、定义、函数调用之间的数据依赖关系，具体见srcPtrPolicy中的修改。</p>
<p>使用一个栈结构保留一个variable最近一次的数据依赖，考虑如下实例：<br>a.var1 = b.var2;<br>a.var1 = c.var2;<br>d.var3 = a.var1;<br>这里b与a，c与a，a与d，c与d均有数据依赖，b和d没有数据依赖</p>
<p>访问堆中对象问题<br>使用指针访问对象，不能在函数体内声明变量，否则会在函数结束时释放调栈中的对象<br>创建局部对象问题<br>srcsax框架写有释放内存的函数，因此使用new创建对象会在函数内被释放而导致段错误,使用局部变量的方法在调用释放内存函数时还是会抛出abort，目前的解决办法是在srcSAXController析构之前保存处理的结果。</p>
<p>目前结果：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">calculator</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> &amp;num1,<span class="keyword">int</span> *num2,calculator c)</span></span>&#123;</span><br><span class="line">	calculator d;</span><br><span class="line">	<span class="keyword">this</span>.result = c.result;</span><br><span class="line">	<span class="keyword">this</span>.result = A.a;</span><br><span class="line">	<span class="keyword">this</span>.result = B.b;</span><br><span class="line">        <span class="keyword">int</span> sum = num1+*num2;</span><br><span class="line">        result = sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">int</span> b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">21</span>;</span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">45</span>;</span><br><span class="line">    calculator c;</span><br><span class="line">    <span class="keyword">int</span> *ptr = &amp;y;</span><br><span class="line">    calculator cal;</span><br><span class="line">    cal.add(x,ptr,c);</span><br><span class="line">    ptr = &amp;cal.result;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *ptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>DataDependency可以得到两个依赖，A与calculator，B与calculator</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class calculator&#123;</span><br><span class="line">public:</span><br><span class="line">    void add(int &amp;num1,int *num2,calculator c)&#123;</span><br><span class="line">        int sum = num1+*num2;</span><br><span class="line">        result = sum;</span><br><span class="line">		calculator d;</span><br><span class="line">		this.result = c.result;</span><br><span class="line">		this.result = A.a;</span><br><span class="line">		this.result = B.b;</span><br><span class="line">		A a1;</span><br><span class="line">		a1.func(result);</span><br><span class="line">    &#125;</span><br><span class="line">    int result;</span><br><span class="line">&#125;;</span><br><span class="line">class A&#123;</span><br><span class="line">public:</span><br><span class="line">	void func(int res)&#123;</span><br><span class="line"></span><br><span class="line">​</span><br></pre></td></tr></table></figure>
<p>}<br>int a;<br>​<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>样例：B.b通过a1.func传播到res变量中，需要在result变量中记录下来B.b已经被传播到result中。在解析赋值语句时对被赋值的变量创建赋值栈，栈顶的类属性将被传播出去</p>
<p>应用于：itrust</p>
<p>bash脚本：find -name <em>.java | sed -r ‘s/(.</em>).java/ srcml \1.java –position -o \1.java.xml/‘ | bash</p>
<p>使用srcml转换所有java文件</p>
<p>加载.xml文件：递归地加载目录中的所有.xml文件</p>
<p>内存泄漏处理：文件数量级增加时发生了内存泄露，自己new的对象没有被纳入到srcptr框架的对象管理中，需要将其手动释放。</p>
<p>解决了内存泄露之后仍然报内存越界访问问题</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/28/upset-and-angri-神经网络搭建/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/28/upset-and-angri-神经网络搭建/" itemprop="url">upset and angri 神经网络搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-28T16:44:36+08:00">
                2019-05-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/机器学习/" itemprop="url" rel="index">
                    <span itemprop="name">机器学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>实现 <a href="https://arxiv.org/abs/1707.01159" target="_blank" rel="noopener">UPSET and ANGRI</a>中介绍到的神经网络模型，产生使识别模型误判的扰动因子。损失函数为图片改动差距和误判模型与生成图片差距</p>
<h1 id="tensorflow名词笔记（全连接神经网络为例）"><a href="#tensorflow名词笔记（全连接神经网络为例）" class="headerlink" title="tensorflow名词笔记（全连接神经网络为例）"></a>tensorflow名词笔记（全连接神经网络为例）</h1><ul>
<li>tf.variable声明变量，tf.Variable(tf.random_normal([2, 3], stddev=1)，生成一个正态随机分布的2*3的矩阵，标准差为1，变量可以用来作为每层的特征参数</li>
<li>前向传播算法，全连接神经网络中一层向下一层传播，节点值<em>边权重，使用矩阵乘法，节点向量 </em> 边权值矩阵</li>
<li>tf. global_variables_initializer() ，初始化所有变量</li>
<li>tf.placeholder，定义存放输入数据的地方，在session处用feed_dict填补输入数据</li>
<li>损失函数，预测值和实际值的差距（越小越好）</li>
<li>反向传播算法，优化每层的边的权值，tf.train.AdamOptimizer(学习率) .minimize (损失函数) </li>
<li><p>激活函数和偏置项，偏置项让函数不经过原点，激活函数让函数变为非线性（如sigmoid函数）<img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1559054990455.png" alt="1559054990455"></p>
</li>
<li><p>交叉熵和均方差定义损失函数，网络的输出结果和正确结果做均方差或者交叉熵，得到损失函数，最小化损失函数。</p>
</li>
<li>反向传播优化，移动参数位置至损失函数取得最小值，学习率代表了移动参数的跨度</li>
<li>综合梯度下降和随机梯度下降，综合考虑所有值的损失函数，随机考虑单个值，结合二者，每次计算一个batch的损失函数，可以下降的足够快并且达到接近梯度下降的结果</li>
<li>指数衰减法修改学习率，decayed_learning_rate =learning_rate * decay_rate ^ (global_step / decay_ steps)</li>
<li>过拟合问题，为了防止模型过度拟合训练数据，刻画模型复杂度的指标（正则化），限制权重的大小</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/01/go-card-data-analysis/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/01/go-card-data-analysis/" itemprop="url">go-card_data_analysis</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-01T13:12:43+08:00">
                2019-05-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Go-card-data分析报告"><a href="#Go-card-data分析报告" class="headerlink" title="Go-card data分析报告"></a>Go-card data分析报告</h1><h2 id="Data-Quality"><a href="#Data-Quality" class="headerlink" title="Data Quality"></a>Data Quality</h2><p>数据质量指（摘自Data Quality: High-impact Strategies):</p>
<ul>
<li>数据与实际情景描绘相关的卓越程度。</li>
<li>使数据适合特定用途的完整性，有效性，一致性，及时性和准确性的状态。</li>
<li>数据的全部特征和特征与其满足特定目的的能力有关; 与数据相关的因素的卓越度之和。</li>
<li>确保数据值符合业务要求和验收标准的过程和技术。</li>
<li>完整，标准，一致，准确和时间戳。</li>
</ul>
<p>数据质量常常关心的纬度有：可访问性，完整性，可信度，参与性，客观性，可读性，相关性，声誉，风格，及时性，唯一性，有用性。</p>
<p>因此数据质量在数据值本身是指数据值的质量，数据中的缺失值、异常值、不一致的值、unknown的值均是需要被处理的脏数据。抛开数据值，数据质量也指这个数据集的可信度，数据来源的声誉等外在因素。</p>
<h1 id="DQ-Problems"><a href="#DQ-Problems" class="headerlink" title="DQ Problems"></a>DQ Problems</h1><p>go card dataset描述了go card售票系统自2012年11月至2013年4月这6个月之间的昆士兰州东南部公共交通网络。针对go card dataset中数据的特性，使用python，对数据集的数据质量进行了以下几个纬度的评估，来揭示一些数据集中中可能存在的缺陷，python代码:<a href="https://paste.ubuntu.com/p/JMMhdWrCJG/" target="_blank" rel="noopener">https://paste.ubuntu.com/p/JMMhdWrCJG/</a>：</p>
<ul>
<li><p>可访问性，可访问性是指这个数据集的每条数据是否都可以访问到，可能存在的缺陷有由于数据文件的损坏导致部分或者整个数据集无法访问，在实际处理时使用pickle将这个数据集水平分隔为45个子数据集（每读10万行创建一个文件，并将数据写入文件），结果表明，go-card data中的每一行都是可以访问的</p>
</li>
<li><p>完整性</p>
<ul>
<li><p>列完整性，go-card data中的部分数据存在列缺失现象，经过处理后发现,4118707条数据列完整，372012条数据缺失一列，且缺失的均为最后一列，3304条数据缺失两列，且缺失的均为最后两列。列完整度（列完整数据条数/总条数）为<strong>91.65%</strong></p>
</li>
<li><p>时间点完整性，数据集总共有四百五十多万条，go card data explanation表示售票记录分布在6个月之中，因此理应是每一天都有出行记录的，通过绘制时间分布图，可以发现时间上的不连贯性（如果有几天没有记录），可以预测数据集出现了行缺失现象。事实上，数据集中只有<strong>2013年1月</strong>的数据，因此最终只得出了1月份的售票记录分布图:<img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1556632746011.png" alt="1556632746011"></p>
<p>从上图可以得出，1月24号以后的数据存在<strong>缺失</strong>现象，且售票记录的分布存在<strong>周期性波动</strong>（大约每隔8天到达一个高峰期）</p>
</li>
<li><p>数据完整性</p>
<p>检查数据集每一行中每一项数据是否为空，结果发现存在<strong>1308764</strong>条空数据，空数据的占比约为<strong>1.95%</strong></p>
</li>
</ul>
</li>
<li><p>一致性</p>
<p>数据集中的smartcard id和journey id具有一致性，检查smartcard id是否是32位16进制数，journey id是否是25位10进制数。结果发现smartcard id有<strong>1条</strong>不符合规范，journey id有<strong>225231条</strong>不符合规范。</p>
</li>
</ul>
<h1 id="Amending-DQ-problems"><a href="#Amending-DQ-problems" class="headerlink" title="Amending DQ problems"></a>Amending DQ problems</h1><ul>
<li><p>缺失数据</p>
<p>对于缺失值，可以用删除、均值替换和插补法处理，go card数据集中的空数据有数值类型和字符类型，且前后关联不大，建议在数据集中保留空数据现象。对于第15列缺失的现象，可以使用均值替换处理，因为据观测可以得出第十五列trip id这个属性大多数都为1（一次售票代表一次旅行），可以用1来填补那些缺失了第15列的数据，对于缺失了第14列的数据，由于journey id是唯一的，无法填补应当保留这种缺失现象。</p>
</li>
<li><p>不一致数据</p>
<p>对于不一致数据应当对数据进行更新、清洗等操作，在检查数据一致性时，那一条smartcard id不符合规范的数据是异常数据（只有第一项有值），应当清洗掉这条数据，journey id不符合规范的数据和列缺失数据过多，应当对异常数据进行更新。</p>
</li>
<li><p>Unknown数据</p>
<p>对于go card数据集中的unknown数据，可以不做处理，因为数据集说明中本身的意图就是对那部分未知的数据使用unknown处理。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/23/SA-system-design-specification/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/23/SA-system-design-specification/" itemprop="url">SA_system_design_specification</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-23T20:46:34+08:00">
                2019-01-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Assignment3-design-patterns"><a href="#Assignment3-design-patterns" class="headerlink" title="Assignment3 design patterns"></a>Assignment3 design patterns</h1><h1 id="Aim"><a href="#Aim" class="headerlink" title="Aim"></a>Aim</h1><p>项目实现了一个图书管理系统的设计和原型，目的是满足基本需求，并且在设计中遵守设计模式的原则，使系统易用、易修改。</p>
<h1 id="Content-description"><a href="#Content-description" class="headerlink" title="Content description"></a>Content description</h1><h2 id="components-description"><a href="#components-description" class="headerlink" title="components description"></a>components description</h2><ol>
<li><p>对不同用户提供不同借书方法，并且可以调整、添加新的借书方法。使用策略模式，将借书这一行为从用户中抽离出来，可以在运行时更改行为。用户持有策略接口，运行时动态选择使用的策略。</p>
<p>选择原因：</p>
<ul>
<li>借书方法可以自由切换，以应对新借书方法的产生</li>
<li>易于扩展，可以在不改变原有代码的基础上新增借书方法，符合开闭原则</li>
<li>代替了条件语句，用户只需要知道自己需要选择的策略，而通过条件判断是不容易维护的。</li>
</ul>
<p>类图：</p>
<p><img src="..\images\strategy.png" alt="strategy"></p>
</li>
<li><p>图书管理员编辑图书、用户信息、产生借书、逾期报告。使用访问者模式，根据管理员查看的用户类型来改变查看的方法，不同的用户产生不同的借书、逾期报告。用户接受访问者对象，访问者对象处理对用户的操作。</p>
<p>选择原因：</p>
<ul>
<li>增加查看新用户类型的信息方便，只需增加一个具体用户类，符合开闭原则。</li>
<li>将有关元素对象的访问行为集中到一个访问者对象中，而不是分散在一个个的元素类中。类的职责更加清晰，有利于对象结构中元素对象的复用，相同的对象结构可以供多个不同的访问者访问。</li>
<li>在不修改现有用户类层次结构的情况下，定义作用于该层次结构的操作。</li>
</ul>
<p>类图：</p>
<p><img src="..\images\visitor.png" alt="visitor"></p>
<p>管理员向其他部门、学校授予查看、增加用户信息的权限，使用条件模式来对其他部门查看用户进行条件过滤，图书管理系统中记录的用户中只有一部分是其他部门需要查看的，不同部门需要查看的用户群体不同，使用不同的条件过滤一组对象，并通过逻辑操作以解耦方式将其链接。向部门授权使用用户、角色、权限来实现，每个部门有一个权限集合，管理员对权限信息进行操作，来进行权限的授予和取消。</p>
<p>选择原因：</p>
<ul>
<li>符合开闭原则，在有新的部门需要查看一组特别的用户信息时，只需要新扩展一个criteria即可。</li>
<li>解除了部门和用户信息之间的耦合，让criteria专门进行用户筛选</li>
</ul>
<p>类图：</p>
<p><img src="..\images\criteria.png" alt="criteria"></p>
</li>
<li><p>用户读取不同类型的文本文件，系统可以判断文件格式并且分析文件格式，转换为浏览器或客户端支持的格式（这里使用HTML作为统一目标格式）。采用简单工厂模式，借鉴了Java中加密技术的实现，如：<code>KeyGenerator keyGen=KeyGenerator.getInstance(&quot;DESede&quot;);  //获取不同加密算法的密钥生成器</code></p>
<p>为了减轻工厂的负担，将文件格式的判断外放给<code>TextFileTypeGetter</code>，可传入<code>File</code>直接得到枚举类型<code>TextFileType</code> （图中没有画出，可在源码中查看）；转化后的输出是包装类<code>StandardOutput</code>，内含有用户专用的转换后html文件缓存地址，支持在浏览器中打开。</p>
<p>选择原因：</p>
<ul>
<li>解析文件时只需要传入指定参数，不需要知道实现细节</li>
<li>由于这里的工厂主要做的是根据<code>TextFileType</code>做实例化工作 ，没有其他代码，出现新格式时，更改的内容很少，核心工作主要在编写新<code>FileTranslator</code>的代码</li>
<li>工厂方法模式虽然不需要修改抽象工厂，但其更适用于有配置文件的情况，可以利用反射机制；而此处需要的是根据用户选择的文件格式进行实时处理，分支条件判断是必要的，工厂方法并不是很适用，其系统中类的个数是成对增加的，在一定程度上增加了系统的复杂度</li>
<li>如果一定要避开分支条件判断并使用工厂方法模式，可以这么做：具体工厂名称可通过<code>getTranslatorClassName(File file)</code> 得到，这一过程利用的是字符串拼接而几乎没有分支条件判断，然后通过反射机制，把具体工厂名作为类名来实例化具体工厂。这样显然要求具体工厂类名的命名严格遵循某种规范，这一规范与上述获取类名方法的实现息息相关，耦合较高。</li>
</ul>
<p>类图：</p>
<p><img src="../images/simple_factory.png" alt="simple_factory"></p>
</li>
<li><p>用户可以修改自己的信息，且在发生修改时通知管理员。首先修改自己信息这部分复用了组件2中的访问者模式，选择的原因与2中的叙述类似，不再重复叙述；主要区别在于通过合成复用及<code>reviseSelf()</code>方法把访问权限压缩到”自访问“。</p>
<p>类图：</p>
<p><img src="../images/visitor_for_4.png" alt="visitor_for_4"></p>
<p>而发生修改通知管理员则采用发布/订阅模式（相比观察者模式多了一个消息中心）。用户作为发布者，并不直接通知观察者（管理员），而是到消息中心作一次发布操作，发布中心会自动通知所有的观察者。在系统初始化时，发布中心会通过<code>initObservers()</code> 方法把所有预加载的管理员作为观察者们加入到观察者列表中，而系统运行时新注册的用户将通过<code>addObserver(Oberserver observer)</code>方法添加观察者。</p>
<p>选择原因：</p>
<ul>
<li>这一模式是松散耦合的，改变观察者或改变发布者在这一模式中不会相互影响对方</li>
<li>相比观察者模式，发布订阅模式中的订阅者（观察者）和发布者之间不存在依赖关系，对于此处存在多个发布者的情形尤为适用</li>
</ul>
<p>类图：</p>
<p><img src="../images/subscribe_and_publish.png" alt="subscribe_and_publish"></p>
</li>
</ol>
<h1 id="Problems-occurred-and-related-solutions"><a href="#Problems-occurred-and-related-solutions" class="headerlink" title="Problems occurred and related solutions"></a>Problems occurred and related solutions</h1><p>maven中央仓库的一个依赖（<a href="https://mvnrepository.com/artifact/com.aspose/aspose-pdf）出错，无法通过maven自动import，手动下载该jar包并添加到项目library中。" target="_blank" rel="noopener">https://mvnrepository.com/artifact/com.aspose/aspose-pdf）出错，无法通过maven自动import，手动下载该jar包并添加到项目library中。</a></p>
<h1 id="feelings-and-comments"><a href="#feelings-and-comments" class="headerlink" title="feelings and comments"></a>feelings and comments</h1><p>分工 </p>
<p>​    刘倚彤：component1、component2设计、类图、原型</p>
<p>​    蔡蔚霖：component3、component4设计、类图、原型</p>
<ul>
<li><p>刘倚彤</p>
<p>对于同一功能，我们可以选择不同的设计模式来实现，甚至不使用设计模式，但是好的设计模式的应用可以提高系统的质量属性。在选择设计模式时不应该只考虑设计模式的优点，应该发现这样的设计模式会对系统带来可能的一些负担和问题，因为这些问题在暴露出来的时候可能因为已经选用了设计模式所以难以割舍，而且往往弊大于利。</p>
</li>
<li><p>蔡蔚霖</p>
<p>设计模式的选用应当随具体情境的变化而变化。例如对个人信息的修改，如果不同角色的修改过程完全相同，那么访问者模式的使用就完全没有必要，反而增加了系统复杂度；但考虑到角色差异性以及未来加入的新角色，该模式又有了一定的合理性。又比如常见的工厂模式分别有三种，简单工厂、工厂方法、抽象工厂，虽然最后一项可退化为前一项或进一步退化为第一项，但并不意味着选用抽象工厂是最适用的，如本例中的文件处理没有出现产品组的概念，使用抽象工厂模式是完全不合理的。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/20/pig/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/20/pig/" itemprop="url">pig</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-20T22:17:40+08:00">
                2019-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="windows构建pig"><a href="#windows构建pig" class="headerlink" title="windows构建pig"></a>windows构建pig</h1><p>clone或下载源码：<a href="https://github.com/apache/pig/tree/branch-0.17，下载ant并配置环境变量，下载Hadoop并配置环境变量，在pig的顶级目录执行ant，参考https://wiki.apache.org/pig/BuildPig" target="_blank" rel="noopener">https://github.com/apache/pig/tree/branch-0.17，下载ant并配置环境变量，下载Hadoop并配置环境变量，在pig的顶级目录执行ant，参考https://wiki.apache.org/pig/BuildPig</a></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>ant编译卡在ivy-resolve不动，找到两个解释：</p>
<ul>
<li><p>maven仓库文件损坏，应修改maven远程仓库（settings.xml）。</p>
</li>
<li><p>ivy工具使用的库在国外，这里我在编译的时候开了vps，但是还是卡住不动，但是使用境外服务器是可以编译的，可能ivy工具构建时绕过了vps代理。</p>
<p>参考：<a href="https://ask.csdn.net/questions/163160" target="_blank" rel="noopener">https://ask.csdn.net/questions/163160</a></p>
</li>
</ul>
<h1 id="ubuntu构建pig"><a href="#ubuntu构建pig" class="headerlink" title="ubuntu构建pig"></a>ubuntu构建pig</h1><ol>
<li><p>下载ant：</p>
<p>wget <a href="http://mirror.olnevhost.net/pub/apache//ant/binaries/apache-ant-1.10.5-bin.tar.gz" target="_blank" rel="noopener">http://mirror.olnevhost.net/pub/apache//ant/binaries/apache-ant-1.10.5-bin.tar.gz</a></p>
<p>tar -xvzf apache-ant-bin.tar.gz</p>
</li>
<li><p>下载pig源码：</p>
<p>git clone <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:apache/pig.git  </p>
</li>
<li><p>用git剪出一个新分支，并且pull远程0.17分支的版本</p>
<p>参考<a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html</a></p>
</li>
<li><p>编写一个build.sh脚本：</p>
<p>vim build.sh</p>
<p>#指定maven repo源<br>IVY_MIRROR_PROP=${IVY_MIRROR_PROP:-<a href="http://cloud.sogou-inc.com/nexus/content/groups/public/}" target="_blank" rel="noopener">http://cloud.sogou-inc.com/nexus/content/groups/public/}</a></p>
<p>#指定ant home<br>export ANT_HOME=/search/apache-ant-1.10.5<br>export PATH=${ANT_HOME}/bin:$PATH</p>
</li>
<li><p>#修改build.xml,编译jar包<br>ant -Dmvnrepo=$IVY_MIRROR_PROP  -Dhbaseversion=94 -Dhadoopversion=23 -Djvm.arg=… piggybank tar</p>
<p>其中-Djvm-arg即agent位置，修改build.xml参考<a href="https://monsoongale.iteye.com/blog/1028920" target="_blank" rel="noopener">https://monsoongale.iteye.com/blog/1028920</a></p>
</li>
<li><p>执行脚本</p>
<p>sh build.sh</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/07/architecture-patterns/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/07/architecture-patterns/" itemprop="url">architecture-patterns</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-07T16:16:05+08:00">
                2019-01-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/quality-attribute/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/quality-attribute/" itemprop="url">quality_attribute</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-23T10:34:55+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>Assignment1</h1>

<h2 algin="center">南京大学软件学院2016级本科</h2>

<p align="right">161250081刘倚彤</p>

<p>[TOC]</p>
<h1 id="extensibility-vs-scalability"><a href="#extensibility-vs-scalability" class="headerlink" title="extensibility vs scalability"></a>extensibility vs scalability</h1><h2 id="1-scenarios"><a href="#1-scenarios" class="headerlink" title="1. scenarios"></a>1. scenarios</h2><h3 id="extensibility"><a href="#extensibility" class="headerlink" title="extensibility"></a>extensibility</h3><ul>
<li>general scenario</li>
</ul>
<table>
<thead>
<tr>
<th>element</th>
<th>values</th>
</tr>
</thead>
<tbody>
<tr>
<td>source</td>
<td>同类产品、市场、软件订购方、交互设备</td>
</tr>
<tr>
<td>stimulus</td>
<td>同类产品有新功能；订购方、市场产生新需求；交互设备更新换代</td>
</tr>
<tr>
<td>artifact</td>
<td>添加新功能的系统；与更新的设备交互的接口</td>
</tr>
<tr>
<td>environment</td>
<td>产品已上线；产品目前功能不满足新的需要</td>
</tr>
<tr>
<td>response</td>
<td>添加新功能至满足需求；添加新接口与更新的设备交互</td>
</tr>
<tr>
<td>response measure</td>
<td>添加的新特性数量/需求变更数量；平均添加新功能所用时间；</td>
</tr>
</tbody>
</table>
<ul>
<li><p>sample scenario</p>
<p><img src="../images/10.png" alt="1545634619091"></p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1545635275133.png" alt="1545635275133"></p>
</li>
</ul>
<h3 id="scalability"><a href="#scalability" class="headerlink" title="scalability"></a>scalability</h3><ul>
<li><p>general scenario</p>
<p>| element          | values                                                       |<br>| —————- | ———————————————————— |<br>| source           | 用户、市场、政策                                             |<br>| stimulus         | 用户数量增加；市场需求量增大；政策变更导致需要额外保存数据   |<br>| artifact         | 数据库；计算服务器                                           |<br>| environment      | 正常运行；死锁；过载运行                                     |<br>| response         | 记录错误；添加数据库或修改数据库设计来应对数据库容量不足；扩展数据库存储其他数据 |<br>| response measure | 可能并发的用户数、连接数；最大存储数据量；                   |</p>
</li>
<li><p>sample scenario</p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1545639354504.png" alt="1545639354504"></p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1545640005397.png" alt="1545640005397"></p>
</li>
</ul>
<h2 id="2-relationships-and-differences"><a href="#2-relationships-and-differences" class="headerlink" title="2. relationships and differences"></a>2. relationships and differences</h2><p>extensibility（可扩展性）和scalability（可伸缩性）的共同点在于软件当前运行没有问题的假设下，考虑到了未来的变化会对现有系统带来的影响，并将这些考虑应用到实际的软件结构设计中，构造可扩展或可伸缩的系统。可扩展性的关注点是应对功能增加，同时最大限度地减少对现有系统功能的影响，在新功能添加时，可扩展的系统d的内部结构和数据流受到的影响要尽可能地小。比如随着环境的变化产生的新的功能需求，或者这个软件依赖的其他软件的接口、其他设备、输入数据发生了改变，在可扩展性设计原则下要让软件能够轻松应对这些变化，不进行过多的重构。可伸缩性是系统，网络或流程处理越来越多的工作的能力，或者是为了适应这种增长而扩大其潜力的能力。可伸缩性的关注点则是当软件的工作量急剧增加时，系统能否不进行重新设计，保持有效性能，比如某个管理系统，在用户不断增长的情况下，仍然可以保证一定的效率并且支持新增的用户，而且不需要重新编译和修改原始源代码。又如可扩展的在线事务处理系统或数据库管理系统是可以升级以通过添加新的处理器、设备和内存来处理更多事务的系统，并且可以在不关闭它的情况下容易、透明地升级。总体来说，可扩展性好的系统可以十分方便地增加新功能，可伸缩性则是系统能够调节大小来适应原有的某个功能的规模的变化。这就是二者的主要区别。</p>
<h2 id="3-strategies-and-tactics"><a href="#3-strategies-and-tactics" class="headerlink" title="3. strategies and tactics"></a>3. strategies and tactics</h2><ul>
<li>extensibility<ul>
<li>S1:将系统分解为comprehensible units，提高内聚降低耦合<ul>
<li>T1:组件化开发模式，用具有完备功能的组件实现功能。</li>
<li>T2:用声明式构建语言构建系统，提供默认的构建生命周期，也可以自己定义任务，单独运行任务，定义任务间的依赖 （gradle）</li>
</ul>
</li>
<li>S2:定义良好的接口<ul>
<li>T3:依赖倒置、OCP原则，支持通过添加进行变更</li>
<li>T4:以小步骤实现功能，减少各模块之间的依赖</li>
</ul>
</li>
</ul>
</li>
<li>scalability<ul>
<li>S3:垂直伸缩<ul>
<li>T5:使用性能更高的服务器</li>
<li>T6:使用优化更好的数据库</li>
<li>T7:使用性价比更高的调度算法来实现负载均衡</li>
</ul>
</li>
<li>S4:水平伸缩<ul>
<li>T8:使用分布式服务器</li>
<li>T9:使用缓存</li>
<li>T10:使用可伸缩数据库</li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>extensibility</th>
<th>scalability</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>提高可扩展性</td>
<td>不同组件的伸缩性差异难以统一配置</td>
</tr>
<tr>
<td>T2</td>
<td>提高可扩展性</td>
<td>不影响可伸缩性</td>
</tr>
<tr>
<td>T3</td>
<td>提高可扩展性</td>
<td>不影响可伸缩性</td>
</tr>
<tr>
<td>T4</td>
<td>提高可扩展性</td>
<td>每一步的设计都需要考虑可伸缩性</td>
</tr>
<tr>
<td>T5</td>
<td>不影响可扩展性</td>
<td>提高可伸缩性</td>
</tr>
<tr>
<td>T6</td>
<td>不影响可扩展性</td>
<td>提高可伸缩性</td>
</tr>
<tr>
<td>T7</td>
<td>扩展新功能可能会影响调度算法</td>
<td>提高可伸缩性</td>
</tr>
<tr>
<td>T8</td>
<td>不影响可扩展性</td>
<td>提高可伸缩性</td>
</tr>
<tr>
<td>T9</td>
<td>需要扩展的功能与缓存可能发生冲突</td>
<td>提高可伸缩性</td>
</tr>
<tr>
<td>T10</td>
<td>扩展新功能可能会重构数据库</td>
<td>提高可伸缩性</td>
</tr>
</tbody>
</table>
<h1 id="stability-vs-reliability"><a href="#stability-vs-reliability" class="headerlink" title="stability vs reliability"></a>stability vs reliability</h1><h2 id="1-scenarios-1"><a href="#1-scenarios-1" class="headerlink" title="1.scenarios"></a>1.scenarios</h2><h3 id="stability"><a href="#stability" class="headerlink" title="stability"></a>stability</h3><ul>
<li><p>general scenario</p>
<p>| element          | values                                     |<br>| —————- | —————————————— |<br>| source           | 程序、硬件、用户                           |<br>| stimulus         | 程序性错误、异常；硬件出错；用户误操作     |<br>| artifact         | 软硬件接口、软件系统                       |<br>| environment      | 正常运行、过载、死锁                       |<br>| response         | 修复问题，记录日志，继续运行               |<br>| response measure | 正常运行时间/总时间；误操作次数/总操作次数 |</p>
</li>
<li><p>sample scenario</p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1545706794793.png" alt="1545706794793"></p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1545731575418.png" alt="1545731575418"></p>
</li>
</ul>
<h3 id="reliability"><a href="#reliability" class="headerlink" title="reliability"></a>reliability</h3><ul>
<li><p>general scenario</p>
<p>| element          | values                                                    |<br>| —————- | ——————————————————— |<br>| source           | 程序、硬件                                                |<br>| stimulus         | 程序性错误、异常；硬件出错；                              |<br>| artifact         | 计算部件                                                  |<br>| environment      | 正常运行、过载、死锁                                      |<br>| response         | 纠正错误；暂停程序报告错误                                |<br>| response measure | 在给定时间t内产生正确输出的频率；隔离故障停止程序所需时间 |</p>
</li>
<li><p>sample scenario</p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1545732558166.png" alt="1545732558166"></p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1545732876068.png" alt="1545732876068"></p>
</li>
</ul>
<h2 id="2-relationships-and-differences-1"><a href="#2-relationships-and-differences-1" class="headerlink" title="2. relationships and differences"></a>2. relationships and differences</h2><p>stability（稳定性）与reliability（可靠性）的共同点在于二者的衡量标准都是系统变化，而且往往是系统产生了故障、错误等预料之外的变化，系统通过采用不同的手段了应对错误，其稳定性与可靠性也不同。稳定性表征系统对系统发生变化时的敏感性，系统产生了错误数据、硬件出错等问题，系统是否将这些问题暴露出来给用户，稳定性强的系统会展示更少的崩溃次数，系统内部消化错误，然而这种处理手段往往会使系统变得不可靠，比如系统发现了有可能会产生冲突的数据包，决策不向用户报告错误而自行选择可能的解决方案，稳定性的增强带来了可靠性的降低；稳定性也会影响可伸缩性，稳定性强的系统用户便不会因为接收到了错误而重复操作，用户执行更少的任务，意味着系统可以支持更多的用户。可靠性与可用性、可维护性共称为RAS，使用更高级别的RAS设计的计算机具有许多保护数据完整性的功能，并帮助它们长时间保持可用而不会出现故障，可靠性的定义为系统在某个给定时间<em>t内</em>产生正确输出的概率。可靠性强的系统只执行绝对正确的指令，在遇到错误时，往往会暂时停止程序或者程序的一部分，直到错误修复，基于互联网的系统便基于可靠性工作，在出现网络连接中断时停止功能的使用，立即备份数据，在网络恢复后，我们可以依靠它不丢失数据，这样的设计似乎违反了稳定性，但是它十分可靠。再比如一个运算器，接收到了除0的运算，可靠性的设计认为这样的结果是错误的，应该抛出异常，中断运算，而稳定性的设计则会为了尽量展示更少的崩溃次数，返回一个用inf表示的特殊结果。综上所述，稳定性与可靠性的差异便在于系统应对错误的处理方式。提高一方的同时势必会影响到另一方。</p>
<h2 id="3-strategies-and-tactics-1"><a href="#3-strategies-and-tactics-1" class="headerlink" title="3. strategies and tactics"></a>3. strategies and tactics</h2><ul>
<li>stability<ul>
<li>S1:提高系统性能<ul>
<li>T1:使用更加可靠的硬件设备，减少硬件出错的频率</li>
<li>T2:减少任务执行时间，提供更多的可用资源，防止多用户同时执行产生的死锁和资源争用</li>
</ul>
</li>
<li>S2:提高系统的可伸缩性<ul>
<li>T3:减少因为系统过载所产生的错误，拒绝请求等不稳定行为。</li>
<li>T4:增加系统并行能力，减少排队请求带来的性能降低，增强稳定性。</li>
</ul>
</li>
</ul>
</li>
<li>reliability<ul>
<li>S1:硬件功能<ul>
<li>T5:处理器指令错误检测和指令重试，减少出现指令级故障的可能性。</li>
<li>T6:内存组件和内存总线的奇偶校验，禁用坏块，记忆擦洗，记忆保留，糟糕的页面离线，冗余位转向，冗余独立存储器阵列，用于防止内存故障带来的程序性错误。</li>
<li>T7:用于数据传输/重试和数据存储的循环冗余校验，用于防止I/O传输时的数据错误。</li>
<li>T8:磁盘存储的RAID配置，崩溃后的日志记录系统，数据校验和后台清理，用于检查数据错误，记录日志。</li>
<li>T9:复制组件防止单点故障（电源），时钟频率、温度、电压的指定工作范围监控例程，用于在可能发生故障时中断程序。</li>
</ul>
</li>
<li>S2：软件功能<ul>
<li>T10:丢弃网络传输中冲突的数据包，报告错误并重新请求数据</li>
<li>T11:组件化设计模式，将一个大型系统分解，更容易定位故障并修复</li>
<li>T12:可维护性的独立服务处理器，远程监控、警报和控制故障</li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th>stability</th>
<th>reliability</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">T1</td>
<td>提高稳定性</td>
<td>减少故障发生概率，提高了可靠性</td>
</tr>
<tr>
<td style="text-align:left">T2</td>
<td>提高稳定性</td>
<td>不影响可靠性</td>
</tr>
<tr>
<td style="text-align:left">T3</td>
<td>提高稳定性</td>
<td>减少了错误的发生，提高可靠性</td>
</tr>
<tr>
<td style="text-align:left">T4</td>
<td>提高稳定性</td>
<td>并行可能带来的并发错误，降低了可靠性</td>
</tr>
<tr>
<td style="text-align:left">T5</td>
<td>指令错误与重试会增加崩溃次数，降低了稳定性</td>
<td>提高可靠性</td>
</tr>
<tr>
<td style="text-align:left">T6</td>
<td>数据校验出错，系统崩溃，降低了稳定性</td>
<td>提高可靠性</td>
</tr>
<tr>
<td style="text-align:left">T7</td>
<td>数据校验出错，系统崩溃，降低了稳定性</td>
<td>提高可靠性</td>
</tr>
<tr>
<td style="text-align:left">T8</td>
<td>磁盘出错，系统崩溃，降低了稳定性</td>
<td>提高可靠性</td>
</tr>
<tr>
<td style="text-align:left">T9</td>
<td>硬件故障带来系统崩溃，降低了稳定性</td>
<td>提高可靠性</td>
</tr>
<tr>
<td style="text-align:left">T10</td>
<td>数据错误停止当前操作重传数据，降低了稳定性</td>
<td>提高可靠性</td>
</tr>
<tr>
<td style="text-align:left">T11</td>
<td>不影响稳定性</td>
<td>提高可靠性</td>
</tr>
<tr>
<td style="text-align:left">T12</td>
<td>独立处理器带来的停止系统，降低了稳定性</td>
<td>提高可靠性</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/20/seam/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/20/seam/" itemprop="url">seam</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-20T23:14:26+08:00">
                2018-12-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="seam与groovy执行测试用例问题"><a href="#seam与groovy执行测试用例问题" class="headerlink" title="seam与groovy执行测试用例问题"></a>seam与groovy执行测试用例问题</h2><h3 id="仓库问题"><a href="#仓库问题" class="headerlink" title="仓库问题"></a>仓库问题</h3><p>seam2.2以下均使用ant管理，2.3使用maven，在seam源码中的readme可以看到要构建seam需要安装jboss-as，然后mvn clean install，然而在mvn clean install时一直找不到pom.xml中的依赖（dom4j-brew)，dom4j在maven中央仓库中便有，也很常见，然而dom4j-brew缺不在中央仓库中，查了下应该在<a href="https://repository.jboss.org/nexus/content/groups/public-jboss/这个仓库里。顺便了解了下远程仓库的机制。" target="_blank" rel="noopener">https://repository.jboss.org/nexus/content/groups/public-jboss/这个仓库里。顺便了解了下远程仓库的机制。</a></p>
<p>当我们执行 Maven 构建命令，Maven 依赖库按以下顺序进行搜索：</p>
<ul>
<li>第1步 - 搜索依赖本地资源库，如果没有找到，跳到第2步，否则，如果找到那么会做进一步处理。</li>
<li>第2步 - 搜索依赖中央存储库，如果没有找到，则从远程资源库/存储库中，然后移动到步骤4，否则如果找到，那么它下载到本地存储库中，以备将来参考使用。</li>
<li>第3步 - 如果没有提到远程仓库，Maven 则会停止处理并抛出错误（找不到依赖库）。</li>
<li>第4步 - 远程仓库或储存库中的搜索依赖，如果找到它会下载到本地资源库以供将来参考使用，否则 Maven 停止处理并抛出错误（找不到依赖库）。</li>
</ul>
<p>回到seam官方文档，发现已经提出需要设置settings.xml来设置用于构建seam的maven远程仓库，并且提供了settings.xml，问题解决</p>
<h3 id="javadoc构建检查"><a href="#javadoc构建检查" class="headerlink" title="javadoc构建检查"></a>javadoc构建检查</h3><p>seam2.3是java 5的项目，对javadoc要求不严格，项目中也有不按doc编程的例子，用java 8进行构建时会报出以下错误，需要跳过严格检查过程。</p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1545320362141.png" alt="1545320362141"></p>
<h2 id="JBoss-as"><a href="#JBoss-as" class="headerlink" title="JBoss-as"></a>JBoss-as</h2><p>运行jboss instance报错。替换modules.jar</p>
<p><a href="https://stackoverflow.com/questions/48403832/javax-xml-parsers-factoryconfigurationerror-running-jboss-as-7-1-with-java-7-upd" target="_blank" rel="noopener">https://stackoverflow.com/questions/48403832/javax-xml-parsers-factoryconfigurationerror-running-jboss-as-7-1-with-java-7-upd</a></p>
<p>jboss支持jdk1.7及以下版本，要修改standlone.bat来指定版本，同样，运行测试也需要修改java_home</p>
<h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><p>指令：</p>
<blockquote>
<p>mvn clean test -Darquillian=jbossas-managed-7</p>
</blockquote>
<p>Please include at least 1 Deployable Container on your Classpath</p>
<p><a href="https://stackoverflow.com/questions/42784861/how-to-add-a-deployable-container-to-my-class-path" target="_blank" rel="noopener">https://stackoverflow.com/questions/42784861/how-to-add-a-deployable-container-to-my-class-path</a></p>
<p><a href="https://stackoverflow.com/questions/39246595/cdi-api-version-mismatch-error-when-trying-to-run-arquillian-getting-started-exa" target="_blank" rel="noopener">https://stackoverflow.com/questions/39246595/cdi-api-version-mismatch-error-when-trying-to-run-arquillian-getting-started-exa</a></p>
<p>deploy</p>
<p><a href="https://stackoverflow.com/questions/38507794/duplicateserviceexception-jboss-server" target="_blank" rel="noopener">https://stackoverflow.com/questions/38507794/duplicateserviceexception-jboss-server</a></p>
<p><a href="https://access.redhat.com/documentation/ja-jp/jboss_enterprise_application_platform/6/html/migration_guide/debug_and_resolve_seam_22_booking_archive_deployment_errors_and_exceptions" target="_blank" rel="noopener">https://access.redhat.com/documentation/ja-jp/jboss_enterprise_application_platform/6/html/migration_guide/debug_and_resolve_seam_22_booking_archive_deployment_errors_and_exceptions</a></p>
<p>arquillian</p>
<p><a href="https://github.com/arquillian/arquillian-cube/issues/661" target="_blank" rel="noopener">https://github.com/arquillian/arquillian-cube/issues/661</a></p>
<h1 id="surefire"><a href="#surefire" class="headerlink" title="surefire"></a>surefire</h1><p>Maven运行测试用例时，是通过调用maven的surefire插件并fork一个子进程来执行用例的，所以这里可以在surefire插件的配置中直接添加jvm参数</p>
<p><a href="https://blog.csdn.net/wang67712640/article/details/78092804" target="_blank" rel="noopener">https://blog.csdn.net/wang67712640/article/details/78092804</a></p>
<p>为seam项目中的每个module的pom.xml创建一个build标签，并在其中添加surefire配置。</p>
<h1 id="groovy-test-task"><a href="#groovy-test-task" class="headerlink" title="groovy test task"></a>groovy test task</h1><p>gradle同样也有类似maven的fork策略，如</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">compileTestGroovy &#123;</span><br><span class="line">    groovyOptions.fork(<span class="string">memoryMaximumSize:</span> groovycTest_mx)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在测试时要在test任务中添加jvm参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test&#123;</span><br><span class="line">	jvmArgs &apos;-agentpath:C:\\Users\\84979\\Desktop\\code_analysis\\data_dependency_capturer\\x64\\Release\\data_dependency_capturer.dll&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="class-signature问题"><a href="#class-signature问题" class="headerlink" title="class_signature问题"></a>class_signature问题</h2><p>gradle的编译策略是有一个sourceSet指定所有的test文件位置，将其编译为class文件，所以产生的class_signature没有共同前缀，如图：</p>
<p><img src="C:\Users\84979\AppData\Roaming\Typora\typora-user-images\1547358654474.png" alt="1547358654474"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/08/LR(1)parser/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sf.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="somnus">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/08/LR(1)parser/" itemprop="url">LR(1) parser</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-08T13:50:11+08:00">
                2018-11-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="lab2实验报告"><a href="#lab2实验报告" class="headerlink" title="lab2实验报告"></a>lab2实验报告</h1><h1 id="Motivation-Aim"><a href="#Motivation-Aim" class="headerlink" title="Motivation/Aim"></a>Motivation/Aim</h1><ul>
<li>使用LR语法分析技术分析一个满足LR的上下文无关文法，构造其LR（1）DFA和LR（1）parsing table，然后基于parsing table编程，目的是可以接受一个token输入流，输出对应的规约序列和语法分析树。</li>
<li>实现慌恐模式的错误恢复。</li>
</ul>
<h1 id="Content-description"><a href="#Content-description" class="headerlink" title="Content description"></a>Content description</h1><ul>
<li>文法使用如图的文法，该文件具有二义性</li>
</ul>
<p><img src="../images/2.png" alt="1541657491765"></p>
<ul>
<li>DFA、parsing table详见相关FA描述</li>
<li>syntactic parser，语法分析程序，接受token序列，结合上述文法的parsing table，进行语法分析，输出规约序列，最终产生一个语法分析树。</li>
<li>错误处理例程，用来处理token序列中可能产生的错误输入。</li>
</ul>
<h1 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h1><ul>
<li>LR（1）DFA的构造（见core algorithms）</li>
<li>LR（1）parsing table的构造（见core algorithms）</li>
<li>悬空else的处理，对每个else stmt结构，采用最近原则与最近的尚未匹配then stmt匹配，根据这种原则来解决构造parsing table所产生的冲突。假设栈中的内容是if e then stmt，当前输入符号是else，则应该选择移入else来与最近的then相匹配。</li>
<li>错误处理例程（见related FA descriptions）</li>
<li>根据输出的规约序列生成语法分析树</li>
</ul>
<h1 id="Assumptions"><a href="#Assumptions" class="headerlink" title="Assumptions"></a>Assumptions</h1><ul>
<li>token序列仅有i，a，t，e，w，d，b，end，c，；这几种，遇到其他token字符时，错误处理例程将发出诊断信息“未标识字符”并跳过这个字符。</li>
</ul>
<h1 id="Related-FA-descriptions"><a href="#Related-FA-descriptions" class="headerlink" title="Related FA descriptions"></a>Related FA descriptions</h1><ul>
<li>LR(1) DFA</li>
</ul>
<p><img src="../images/4.jpg" alt=""></p>
<ul>
<li><p>LR(1) parsing table</p>
<p>| 状态 | ACTION |      |      |      |      | GOTO |<br>| —- | —— | —- | —- | —- | —- | —- |<br>|      | i      | ；   | e    | a    | $R   | S    |<br>| 0    | s2     | e2   | e2   | s3   | e4   | 1    |<br>| 1    | e3.1   | s4   | e2   | e3.1 | ACC  |      |<br>| 2    | s6     | e2   | e1.1 | s11  | e4   | 5    |<br>| 3    | e2     | r4   | e2   | e2   | r4   |      |<br>| 4    | s2     | e2   | e2   | s3   | e4   | 7    |<br>| 5    | e2     | r2   | s8   | e2   | r2   |      |<br>| 6    | s6     | e2   | e1.2 | s11  | e4   | 10   |<br>| 7    | e3.1   | r3   | e2   | e3.1 | r3   |      |<br>| 8    | s2     | e2   | e2   | s3   | e4   | 12   |<br>| 9    | s6     | e2   | e2   | s11  | e4   | 13   |<br>| 10   | e3.2   | r2   | s14  | e3.2 | r2   |      |<br>| 11   | e2     | r4   | r4   | e2   | r4   |      |<br>| 12   | e3.1   | r1   | e2   | e3.1 | r1   |      |<br>| 13   | e3.2   | r3   | r3   | e3.2 | r3   |      |<br>| 14   | s6     | e2   | e2   | s11  | e4   | 15   |<br>| 15   | e3.2   | r1   | r1   | e3.2 | r1   |      |</p>
</li>
<li><p>错误处理例程：</p>
<ul>
<li>e1<ul>
<li>原因：if与else之间缺少S</li>
<li>解决：输出“if与else之间为空”。如果是e1.1，则将状态5压栈，如果是e1.2，则将状态10压栈，模拟if S，来接收下一个else</li>
</ul>
</li>
<li>e2<ul>
<li>原因：不应该出现在此处的符号，与前后符号均无法配合的符号。</li>
<li>解决：输出“非法符号”，将输入流的读头前进一步</li>
</ul>
</li>
<li>e3<ul>
<li>原因：S与S中间缺少”;”</li>
<li>解决：输出“语句间缺少;”，如果是e3.1，则将状态4压栈，如果是e3.2，则将状态9压栈，模拟S；S</li>
</ul>
</li>
<li>e4<ul>
<li>原因：提前结束，直接遇到$R</li>
<li>解决：输出“语法分析提前结束，栈中的符号仍未匹配”，结束主函数，抛出异常。</li>
</ul>
</li>
</ul>
<h1 id="Important-Data-Structures"><a href="#Important-Data-Structures" class="headerlink" title="Important Data Structures"></a>Important Data Structures</h1></li>
<li><p>Action，用来描述预测分析表中的一个单元，标识了该单元的操作类型（移入，规约，错误，结束），操作序号（移入时的下一状态、规约时使用的文法号、错误时调用的错误处理例程）。</p>
</li>
<li>Grammar，用来记录一条产生式的左部和右部。</li>
<li>State，用来描述LR(1)文法中的一个DFA状态集，记录了该状态的状态号和入栈时的标识符。</li>
<li>ParsingTable，预测分析表，记录了每个状态对应的ACTION和GOTO</li>
<li><p>ParseTreeNode，分析树节点，每个节点指向自己的左子女和右兄弟，有广度优先遍历的输出节点方法。对于语法分析树T，T的高度为I，则该方法输出I行，每一行依次输出该树该层的所有子节点。</p>
<h1 id="Core-Algorithms"><a href="#Core-Algorithms" class="headerlink" title="Core Algorithms"></a>Core Algorithms</h1></li>
<li><p>通过文法的产生式构造LR(1)DFA</p>
<ul>
<li>输入：文法+S’-&gt;S的增广文法G’</li>
<li>输出：LR（1）DFA</li>
<li>方法：状态内扩展（子自动机调用）和状态间扩展，使用预测符来对需要规约的状态进行规约预测，解决s，r、r，r冲突。</li>
</ul>
</li>
<li><p>通过LR(1)DFA和错误处理例程构造预测分析表</p>
<ul>
<li>输入：LR(1)DFA和错误处理例程</li>
<li>输出：预测分析表</li>
<li>方法：根据状态间扩展关系和状态内规约情况填写预测分析表的GOTO、shift和reduce项，根据错误处理例程的分类，观察每个状态的核，每个状态的核便是该状态实际入栈时的栈内情况，比如实验中的状态1，它的核是S’-&gt;S.和S’-&gt;S.;S 所以该状态下如果忘记输入分号便会产生错误，调用错误处理例程e3.1来添加分号，将e3.1填入表中，其他错误处理例程的填写方法类似，最终错误处理例程将填充满ACTION表部分。</li>
</ul>
</li>
<li><p>结合预测分析表，接收token序列输出规约序列</p>
<ul>
<li>输入：token序列</li>
<li>输出：产生式规约序列</li>
<li>方法：建立一个状态栈，状态栈的每一个节点的状态都存储了状态号和栈顶标识符，根据读头指向的输入流和栈顶标识符决定下一状态或者下一可规约序列，中途可能有错误处理和ACC退出。</li>
</ul>
</li>
<li><p>根据规约序列产生语法分析树</p>
<ul>
<li><p>输入：规约序列</p>
</li>
<li><p>输出：语法分析树的根节点</p>
</li>
<li><p>方法：建立一个产生式栈，对规约序列中的每个产生式A，找到里面所有的S，每个S代表它的一个子节点，因此弹出栈中存储的一个节点作为它的子节点，在构造完这个A的所有子节点后，将A压入栈中。分析下一个产生式，直到规约序列的末尾，因为任何一个句子实例B所产生的规约序列中，产生式右部的S的数量正好比产生式数量少一个（把S视为子过程调用），因此此时栈中正好为空，末尾的那个产生式正好是父节点。如图：</p>
<p><img src="../images/5.jpg" alt=""></p>
</li>
</ul>
</li>
</ul>
<h1 id="Use-cases"><a href="#Use-cases" class="headerlink" title="Use cases"></a>Use cases</h1><p>  测试用例共有6组，前三组的输入为符合文法的token序列，后三组分别测试了错误例程e1，e2，e4，（因为e2的优先级高于e3，e3永远不会发生）</p>
<ol>
<li><ul>
<li><p>input：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if if a else a</span><br></pre></td></tr></table></figure>
</li>
<li><p>output：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">reduce list:</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iSeS</span><br><span class="line">S-&gt;iS</span><br><span class="line"></span><br><span class="line">parse tree:</span><br><span class="line">S-&gt;iS  </span><br><span class="line">S-&gt;iSeS    </span><br><span class="line">S-&gt;a   S-&gt;a</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><p>input：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if if a else a else if a</span><br></pre></td></tr></table></figure>
</li>
<li><p>output：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">reduce list:</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iSeS</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iS</span><br><span class="line">S-&gt;iSeS</span><br><span class="line"></span><br><span class="line">parse tree:</span><br><span class="line">S-&gt;iSeS	</span><br><span class="line">S-&gt;iS	S-&gt;iSeS	</span><br><span class="line">S-&gt;a	S-&gt;a	S-&gt;a</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><p>input：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a ; if a ; if a else a ; if if a else a ; a</span><br></pre></td></tr></table></figure>
</li>
<li><p>output：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">reduce list:</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iS</span><br><span class="line">S-&gt;S;S</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iSeS</span><br><span class="line">S-&gt;S;S</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iSeS</span><br><span class="line">S-&gt;iS</span><br><span class="line">S-&gt;S;S</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;S;S</span><br><span class="line"></span><br><span class="line">parse tree:</span><br><span class="line">S-&gt;S;S	</span><br><span class="line">S-&gt;a	S-&gt;S;S	</span><br><span class="line">S-&gt;iS	S-&gt;S;S	</span><br><span class="line">S-&gt;iSeS	S-&gt;S;S	</span><br><span class="line">S-&gt;a	S-&gt;a	S-&gt;iS	S-&gt;a	</span><br><span class="line">S-&gt;a	S-&gt;iSeS	S-&gt;a	S-&gt;a</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><p>input：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if else a</span><br></pre></td></tr></table></figure>
</li>
<li><p>output：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if与else之间为空</span><br><span class="line">reduce list:</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iSeS</span><br><span class="line"></span><br><span class="line">parse tree:</span><br><span class="line">S-&gt;iSeS	</span><br><span class="line">S-&gt;a	S-&gt;a</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><p>input：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if b a else a ; if a a</span><br></pre></td></tr></table></figure>
</li>
<li><p>output：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">不该出现在这里的符号b</span><br><span class="line">不该出现在这里的符号a</span><br><span class="line">reduce list:</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iSeS</span><br><span class="line">S-&gt;a</span><br><span class="line">S-&gt;iS</span><br><span class="line">S-&gt;S;S</span><br><span class="line"></span><br><span class="line">parse tree:</span><br><span class="line">S-&gt;S;S	</span><br><span class="line">S-&gt;iS	S-&gt;iSeS	</span><br><span class="line">S-&gt;a	S-&gt;a	S-&gt;a</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><p>input：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if a else</span><br></pre></td></tr></table></figure>
</li>
<li><p>output：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法分析提前结束，栈中的符号$ if S else 仍未匹配</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h1 id="Problems-occurred-and-related-solutions"><a href="#Problems-occurred-and-related-solutions" class="headerlink" title="Problems occurred and related solutions"></a>Problems occurred and related solutions</h1><ul>
<li><p>多叉树的层次遍历，并且要每层都换行输出。</p>
<ul>
<li><p>问题：一开始使用递归方法对多叉树进行层次遍历，但是在每一行输出树的每一层时，递归的方法会出现问题，例如：</p>
<p><img src="..\images\6.jpg" alt=""></p>
<p>A单独输出一行并递归输出B,C，B,C输出在同一行，B递归输出D，C递归输出E,F，所以D占一行，E,F占一行，无法做到每一层输出一行。</p>
</li>
<li><p>解决：</p>
<p>使用了队列的方法，每个节点存放一个当前层数，用一个变量i记录当前层数，初始将根节点入队，队列非空时，重复如下操作：</p>
<ul>
<li>从队头弹出一个节点n，如果n的层数大于i，则输出一个换行符，i+1。</li>
<li>输出n的产生式</li>
<li>如果n的左子节点n1非空，将其层数设置为n+1，入队。</li>
<li>如果n1的右兄弟节点n2非空，将其层数设置为n+1，入队，用n2替换n1，不断入队n1的右兄弟节点，直到n2为空。</li>
</ul>
<p>这样便可以进行层次遍历时每一层输出在同一行，不同层输出在不同行。</p>
</li>
</ul>
</li>
</ul>
<h1 id="feelings-and-comments"><a href="#feelings-and-comments" class="headerlink" title="feelings and comments"></a>feelings and comments</h1><ul>
<li>语法分析中的错误恢复机制是根据语言的使用方法来决定程序员所犯的错误中最有可能引起这个语法错误的那项，构造出一个适当的恢复过程，希望在一趟语法分析中尽可能多地发现错误，这一点也是编译语言相对于解释语言的优势，C语言的编译器在一次编译中会尽可能多的告诉程序员这段代码中的错误。LR（1）的错误恢复是得到当前状态下栈内的一个最长前缀，结合读头下的输入符号，来判断可能发生了哪个错误，这个方法的处理是局部的，因为预测分析表的每一项只能根据前面已有的状态发现错误，而不能预知未来，因此假如一段代码中一处发生了错误，通过预测分析的错误处理例程解决了这个错误，可能会影响到后续的代码，现在IDE的做法往往是一边编写的同时便进行着编译，在编译一个项目之前就能看到项目中发生的错误，往往还伴有推荐的可选解决方案，这是语法分析的错误恢复机制的一个进步。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/sf.png" alt="John Doe">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
